{"ast":null,"code":"const BASE_URL = \"https://api.green-api.com\";\nasync function request(method, userId, apiMethod, userApiToken, body) {\n  const url = `${BASE_URL}/waInstance${userId}/${apiMethod}/${userApiToken}`;\n  const headers = {\n    \"Content-Type\": \"application/json\",\n    \"Access-Control-Allow-Origin\": '*',\n    // \"User-Agent\": \"PostmanRuntime/7.32.2\",\n    \"Connection\": \"keep-alive\",\n    \"Accept-Encoding\": \"gzip, deflate, br\",\n    \"Accept\": \"*/*\"\n    // \"Host\": \"<calculated when request is sent>\",\n    // \"Content-Length\": \"<calculated when request is sent>\",\n  };\n\n  try {\n    console.log('bodybodybodybody', JSON.stringify(body));\n    const response = await fetch(url, {\n      headers,\n      method,\n      mode: 'no-cors',\n      cache: \"no-cache\",\n      // credentials: 'include',\n      body: JSON.stringify(body)\n    });\n    const data = await response.text();\n    console.log('data', data);\n    // const response = await fetch(\n    //   url,\n    //   {\n    //     headers,\n    //     method,\n    //     mode: 'no-cors',\n    //     credentials: 'include',\n    //     body: JSON.stringify(body),\n    //   }\n    // );\n    // return console.log(`${apiMethod} response data: `, data);\n  } catch (error) {\n    return console.error(`${apiMethod} response error: `, error);\n  }\n}\nexport function sendMessage(userId, userApiToken, body) {\n  return request('POST', userId, 'sendMessage', userApiToken, body);\n}\n;\nexport function receiveNotification(userId, userApiToken) {\n  return request('GET', userId, 'receiveNotification', userApiToken);\n}\n;","map":{"version":3,"names":["BASE_URL","request","method","userId","apiMethod","userApiToken","body","url","headers","console","log","JSON","stringify","response","fetch","mode","cache","data","text","error","sendMessage","receiveNotification"],"sources":["/Users/valeriykasmasov/projects/green-api-test/src/utils/requests/requests.ts"],"sourcesContent":["const BASE_URL = \"https://api.green-api.com\";\n\ntype TBody = Record<string, string>;\n\nasync function request(\n  method: string,\n  userId: string,\n  apiMethod: string,\n  userApiToken: string,\n  body?: TBody,\n  ) {\n\n  const url = `${BASE_URL}/waInstance${userId}/${apiMethod}/${userApiToken}`\n\n  const headers = {\n    \"Content-Type\": \"application/json\",\n    \"Access-Control-Allow-Origin\": '*',\n    // \"User-Agent\": \"PostmanRuntime/7.32.2\",\n    \"Connection\": \"keep-alive\",\n    \"Accept-Encoding\": \"gzip, deflate, br\",\n    \"Accept\": \"*/*\",\n    // \"Host\": \"<calculated when request is sent>\",\n    // \"Content-Length\": \"<calculated when request is sent>\",\n  }\n\n  try {\n    console.log('bodybodybodybody', JSON.stringify(body))\n    const response = await fetch(\n      url,\n      {\n        headers,\n        method,\n        mode: 'no-cors',\n        cache: \"no-cache\",\n        // credentials: 'include',\n        body: JSON.stringify(body),\n      }\n    )\n\n    const data = await response.text()\n    console.log('data', data)\n    // const response = await fetch(\n    //   url,\n    //   {\n    //     headers,\n    //     method,\n    //     mode: 'no-cors',\n    //     credentials: 'include',\n    //     body: JSON.stringify(body),\n    //   }\n    // );\n    // return console.log(`${apiMethod} response data: `, data);\n  } catch (error) {\n    return console.error(`${apiMethod} response error: `, error);\n  }\n}\n\nexport function sendMessage(userId: string, userApiToken: string, body: TBody) {\n  return request('POST', userId, 'sendMessage', userApiToken, body)\n};\n\nexport function receiveNotification(userId: string, userApiToken: string){\n  return request('GET', userId, 'receiveNotification', userApiToken);\n};\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAG,2BAA2B;AAI5C,eAAeC,OAAOA,CACpBC,MAAc,EACdC,MAAc,EACdC,SAAiB,EACjBC,YAAoB,EACpBC,IAAY,EACV;EAEF,MAAMC,GAAG,GAAI,GAAEP,QAAS,cAAaG,MAAO,IAAGC,SAAU,IAAGC,YAAa,EAAC;EAE1E,MAAMG,OAAO,GAAG;IACd,cAAc,EAAE,kBAAkB;IAClC,6BAA6B,EAAE,GAAG;IAClC;IACA,YAAY,EAAE,YAAY;IAC1B,iBAAiB,EAAE,mBAAmB;IACtC,QAAQ,EAAE;IACV;IACA;EACF,CAAC;;EAED,IAAI;IACFC,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEC,IAAI,CAACC,SAAS,CAACN,IAAI,CAAC,CAAC;IACrD,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAC1BP,GAAG,EACH;MACEC,OAAO;MACPN,MAAM;MACNa,IAAI,EAAE,SAAS;MACfC,KAAK,EAAE,UAAU;MACjB;MACAV,IAAI,EAAEK,IAAI,CAACC,SAAS,CAACN,IAAI;IAC3B,CACF,CAAC;IAED,MAAMW,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;IAClCT,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEO,IAAI,CAAC;IACzB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACF,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd,OAAOV,OAAO,CAACU,KAAK,CAAE,GAAEf,SAAU,mBAAkB,EAAEe,KAAK,CAAC;EAC9D;AACF;AAEA,OAAO,SAASC,WAAWA,CAACjB,MAAc,EAAEE,YAAoB,EAAEC,IAAW,EAAE;EAC7E,OAAOL,OAAO,CAAC,MAAM,EAAEE,MAAM,EAAE,aAAa,EAAEE,YAAY,EAAEC,IAAI,CAAC;AACnE;AAAC;AAED,OAAO,SAASe,mBAAmBA,CAAClB,MAAc,EAAEE,YAAoB,EAAC;EACvE,OAAOJ,OAAO,CAAC,KAAK,EAAEE,MAAM,EAAE,qBAAqB,EAAEE,YAAY,CAAC;AACpE;AAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}