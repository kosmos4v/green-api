{"ast":null,"code":"import { handleActions } from \"redux-actions\";\nimport { ADD_NEW_CHAT, SEND_MESSAGE, SEND_MESSAGE_FAILURE, SEND_MESSAGE_PENDING, SEND_MESSAGE_SUCCESS } from \"../actions/chat\";\nconst initialState = {\n  chats: {},\n  currentChat: {\n    phone: '',\n    chatId: '',\n    messages: []\n  },\n  currentMessage: {\n    messageId: '',\n    text: '',\n    timestamp: '',\n    type: 'outgoing'\n  },\n  isSendMessagePending: false,\n  incomingMessageId: '',\n  sendMessageError: undefined\n};\nexport const chatReduser = handleActions({\n  [ADD_NEW_CHAT]: (state, _ref) => {\n    let {\n      payload\n    } = _ref;\n    const chats = {\n      ...state.chats,\n      [payload.phone]: {\n        phone: payload.phone,\n        chatId: '',\n        messages: []\n      }\n    };\n    return {\n      ...state,\n      chats\n    };\n  },\n  [SEND_MESSAGE]: (state, _ref2) => {\n    let {\n      payload\n    } = _ref2;\n    return {\n      ...state,\n      currentMessage: payload.currentMessage\n    };\n  },\n  [SEND_MESSAGE_PENDING]: (state, _ref3) => {\n    let {\n      payload\n    } = _ref3;\n    return {\n      ...state,\n      isSendMessagePending: payload.isSendMessagePending\n    };\n  },\n  [SEND_MESSAGE_SUCCESS]: (state, _ref4) => {\n    let {\n      payload\n    } = _ref4;\n    return {\n      ...state,\n      incomingMessageId: payload.incomingMessageId,\n      sendMessageError: undefined\n    };\n  },\n  [SEND_MESSAGE_FAILURE]: (state, _ref5) => {\n    let {\n      payload\n    } = _ref5;\n    return {\n      ...state,\n      sendMessageError: payload.error\n    };\n  }\n}, initialState);\nexport default chatReduser;","map":{"version":3,"names":["handleActions","ADD_NEW_CHAT","SEND_MESSAGE","SEND_MESSAGE_FAILURE","SEND_MESSAGE_PENDING","SEND_MESSAGE_SUCCESS","initialState","chats","currentChat","phone","chatId","messages","currentMessage","messageId","text","timestamp","type","isSendMessagePending","incomingMessageId","sendMessageError","undefined","chatReduser","state","_ref","payload","_ref2","_ref3","_ref4","_ref5","error"],"sources":["/Users/valeriykasmasov/projects/green-api-test/src/redux/reducers/chats.ts"],"sourcesContent":["import { handleActions } from \"redux-actions\";\nimport { TChat, TChats } from \"../../models/chat\";\nimport { TMessage } from \"../../models/message\";\n\nimport {\n    ADD_NEW_CHAT,\n    SEND_MESSAGE,\n    SEND_MESSAGE_FAILURE,\n    SEND_MESSAGE_PENDING,\n    SEND_MESSAGE_SUCCESS,\n} from \"../actions/chat\";\n\nexport type TChatState = {\n  chats: TChats,\n  currentChat: TChat,\n  currentMessage: TMessage,\n  isSendMessagePending: boolean,\n  incomingMessageId: string,\n  sendMessageError?: string,\n};\n\nexport type TChatAction = {\n  chats: TChats,\n  currentChat: TChat,\n  currentMessage: TMessage,\n  isSendMessagePending: boolean,\n  incomingMessageId: string,\n  error?: string,\n  phone: string,\n};\n\nconst initialState: TChatState = {\n  chats: {},\n  currentChat: { phone: '', chatId: '', messages:[] },\n  currentMessage: {\n    messageId: '',\n    text: '',\n    timestamp: '',\n    type: 'outgoing',\n  },\n  isSendMessagePending: false,\n  incomingMessageId: '',\n  sendMessageError: undefined,\n};\n\nexport const chatReduser = handleActions<TChatState, TChatAction>({\n\n[ADD_NEW_CHAT]: (state, { payload }) => { \n  const chats = {\n    ...state.chats,\n    [payload.phone]: { phone: payload.phone, chatId: '',messages: [] }\n  }\n  return ({\n    ...state,\n    chats,\n })\n},\n\n[SEND_MESSAGE]: (state, { payload }) => ({\n  ...state,\n  currentMessage: payload.currentMessage,\n}),\n\n[SEND_MESSAGE_PENDING]: (state, { payload }) => ({\n  ...state,\n  isSendMessagePending: payload.isSendMessagePending,\n}),\n\n[SEND_MESSAGE_SUCCESS]: (state, { payload }) => ({\n  ...state,\n  incomingMessageId: payload.incomingMessageId,\n  sendMessageError: undefined,\n}),\n\n[SEND_MESSAGE_FAILURE]: (state, { payload }) => ({\n    ...state,\n    sendMessageError: payload.error,\n})\n}, initialState);\n\nexport default chatReduser;"],"mappings":"AAAA,SAASA,aAAa,QAAQ,eAAe;AAI7C,SACIC,YAAY,EACZC,YAAY,EACZC,oBAAoB,EACpBC,oBAAoB,EACpBC,oBAAoB,QACjB,iBAAiB;AAqBxB,MAAMC,YAAwB,GAAG;EAC/BC,KAAK,EAAE,CAAC,CAAC;EACTC,WAAW,EAAE;IAAEC,KAAK,EAAE,EAAE;IAAEC,MAAM,EAAE,EAAE;IAAEC,QAAQ,EAAC;EAAG,CAAC;EACnDC,cAAc,EAAE;IACdC,SAAS,EAAE,EAAE;IACbC,IAAI,EAAE,EAAE;IACRC,SAAS,EAAE,EAAE;IACbC,IAAI,EAAE;EACR,CAAC;EACDC,oBAAoB,EAAE,KAAK;EAC3BC,iBAAiB,EAAE,EAAE;EACrBC,gBAAgB,EAAEC;AACpB,CAAC;AAED,OAAO,MAAMC,WAAW,GAAGrB,aAAa,CAA0B;EAElE,CAACC,YAAY,GAAG,CAACqB,KAAK,EAAAC,IAAA,KAAkB;IAAA,IAAhB;MAAEC;IAAQ,CAAC,GAAAD,IAAA;IACjC,MAAMhB,KAAK,GAAG;MACZ,GAAGe,KAAK,CAACf,KAAK;MACd,CAACiB,OAAO,CAACf,KAAK,GAAG;QAAEA,KAAK,EAAEe,OAAO,CAACf,KAAK;QAAEC,MAAM,EAAE,EAAE;QAACC,QAAQ,EAAE;MAAG;IACnE,CAAC;IACD,OAAQ;MACN,GAAGW,KAAK;MACRf;IACH,CAAC;EACF,CAAC;EAED,CAACL,YAAY,GAAG,CAACoB,KAAK,EAAAG,KAAA;IAAA,IAAE;MAAED;IAAQ,CAAC,GAAAC,KAAA;IAAA,OAAM;MACvC,GAAGH,KAAK;MACRV,cAAc,EAAEY,OAAO,CAACZ;IAC1B,CAAC;EAAA,CAAC;EAEF,CAACR,oBAAoB,GAAG,CAACkB,KAAK,EAAAI,KAAA;IAAA,IAAE;MAAEF;IAAQ,CAAC,GAAAE,KAAA;IAAA,OAAM;MAC/C,GAAGJ,KAAK;MACRL,oBAAoB,EAAEO,OAAO,CAACP;IAChC,CAAC;EAAA,CAAC;EAEF,CAACZ,oBAAoB,GAAG,CAACiB,KAAK,EAAAK,KAAA;IAAA,IAAE;MAAEH;IAAQ,CAAC,GAAAG,KAAA;IAAA,OAAM;MAC/C,GAAGL,KAAK;MACRJ,iBAAiB,EAAEM,OAAO,CAACN,iBAAiB;MAC5CC,gBAAgB,EAAEC;IACpB,CAAC;EAAA,CAAC;EAEF,CAACjB,oBAAoB,GAAG,CAACmB,KAAK,EAAAM,KAAA;IAAA,IAAE;MAAEJ;IAAQ,CAAC,GAAAI,KAAA;IAAA,OAAM;MAC7C,GAAGN,KAAK;MACRH,gBAAgB,EAAEK,OAAO,CAACK;IAC9B,CAAC;EAAA;AACD,CAAC,EAAEvB,YAAY,CAAC;AAEhB,eAAee,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}